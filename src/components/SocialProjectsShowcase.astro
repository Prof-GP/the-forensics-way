---
// src/components/SocialProjectsShowcase.astro
export interface Props {
  githubUsername?: string;
  threadsHandle?: string;
  linkedinUrl?: string;
  discordUrl?: string;
}

const { 
  githubUsername = 'your-username',
  threadsHandle = 'your-handle',
  linkedinUrl = '',
  discordUrl = ''
} = Astro.props;
---

<section class="social-projects-showcase">
  <div class="showcase-header">
    <h2>Connect & Collaborate</h2>
    <p>Follow our work and join the community</p>
  </div>

  <div class="showcase-grid">
    <!-- Social Links Panel -->
    <div class="showcase-panel social-panel">
      <div class="panel-header">
        <div class="header-icon">üåê</div>
        <div class="header-text">
          <h3>Social Media</h3>
          <p>Connect with us across platforms</p>
        </div>
      </div>

      <div class="social-links">
        {githubUsername && (
          <a href={`https://github.com/${githubUsername}`} target="_blank" rel="noopener noreferrer" class="social-link github">
            <div class="social-icon">
              <svg viewBox="0 0 24 24" width="28" height="28" stroke="currentColor" stroke-width="2" fill="none">
                <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
              </svg>
            </div>
            <div class="social-info">
              <span class="social-label">GitHub</span>
              <span class="social-handle">@{githubUsername}</span>
            </div>
            <div class="social-arrow">‚Üí</div>
          </a>
        )}

        {threadsHandle && (
  <a href={`https://www.threads.net/@${threadsHandle}`} target="_blank" rel="noopener noreferrer" class="social-link threads">
    <div class="social-icon">
      <svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor">
        <path d="M12.186 3.94a8.065 8.065 0 0 1 5.293 2.094l-1.587 1.587a5.93 5.93 0 0 0-3.706-1.347c-3.22 0-5.841 2.62-5.841 5.841s2.62 5.841 5.841 5.841a5.93 5.93 0 0 0 3.706-1.347l1.587 1.587a8.065 8.065 0 0 1-5.293 2.094c-4.46 0-8.075-3.616-8.075-8.075s3.616-8.075 8.075-8.075zm0 4.806c1.804 0 3.269 1.465 3.269 3.269s-1.465 3.269-3.269 3.269-3.269-1.465-3.269-3.269 1.465-3.269 3.269-3.269zm7.05-1.388a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z"/>
      </svg>
    </div>
    <div class="social-info">
      <span class="social-label">Instagram</span>
      <span class="social-handle">@{threadsHandle}</span>
    </div>
    <div class="social-arrow">‚Üí</div>
  </a>
)}

        {linkedinUrl && (
          <a href={linkedinUrl} target="_blank" rel="noopener noreferrer" class="social-link linkedin">
            <div class="social-icon">
              <svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
            </div>
            <div class="social-info">
              <span class="social-label">LinkedIn</span>
              <span class="social-handle">Professional Network</span>
            </div>
            <div class="social-arrow">‚Üí</div>
          </a>
        )}

        {discordUrl && (
          <a href={discordUrl} target="_blank" rel="noopener noreferrer" class="social-link discord">
            <div class="social-icon">
              <svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor">
                <path d="M20.317 4.492c-1.53-.69-3.17-1.2-4.885-1.49a.075.075 0 0 0-.079.036c-.21.369-.444.85-.608 1.23a18.566 18.566 0 0 0-5.487 0 12.36 12.36 0 0 0-.617-1.23A.077.077 0 0 0 8.562 3c-1.714.29-3.354.8-4.885 1.491a.07.07 0 0 0-.032.027C.533 9.093-.32 13.555.099 17.961a.08.08 0 0 0 .031.055 20.03 20.03 0 0 0 5.993 2.98.078.078 0 0 0 .084-.026c.462-.62.874-1.275 1.226-1.963.021-.04.001-.088-.041-.104a13.201 13.201 0 0 1-1.872-.878.075.075 0 0 1-.008-.125c.126-.093.252-.19.372-.287a.075.075 0 0 1 .078-.01c3.927 1.764 8.18 1.764 12.061 0a.075.075 0 0 1 .079.009c.12.098.245.195.372.288a.075.075 0 0 1-.006.125c-.598.344-1.22.635-1.873.877a.075.075 0 0 0-.041.105c.36.687.772 1.341 1.225 1.962a.077.077 0 0 0 .084.028 19.963 19.963 0 0 0 6.002-2.981.076.076 0 0 0 .032-.054c.5-5.094-.838-9.52-3.549-13.442a.06.06 0 0 0-.031-.028zM8.02 15.278c-1.182 0-2.157-1.069-2.157-2.38 0-1.312.956-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.956 2.38-2.157 2.38zm7.975 0c-1.183 0-2.157-1.069-2.157-2.38 0-1.312.955-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.946 2.38-2.157 2.38z"/>
              </svg>
            </div>
            <div class="social-info">
              <span class="social-label">Discord</span>
              <span class="social-handle">Join our server</span>
            </div>
            <div class="social-arrow">‚Üí</div>
          </a>
        )}
      </div>
    </div>

    <!-- GitHub Projects Panel -->
    <div class="showcase-panel projects-panel">
      <div class="panel-header">
        <div class="header-icon">üíª</div>
        <div class="header-text">
          <h3>Open Source Projects</h3>
          <p>Explore our GitHub repositories</p>
        </div>
      </div>

      <div class="projects-container" id="githubProjects">
        <div class="loading-state">
          <div class="spinner"></div>
          <p>Loading repositories...</p>
        </div>
      </div>

      <a href={`https://github.com/${githubUsername}?tab=repositories`} target="_blank" rel="noopener noreferrer" class="view-all-link">
        View All Projects on GitHub ‚Üí
      </a>
    </div>
  </div>
</section>

<script define:vars={{ githubUsername }}>
  async function loadGitHubRepos() {
    const container = document.getElementById('githubProjects');
    if (!container) return;

    try {
      const response = await fetch(`https://api.github.com/users/${githubUsername}/repos?sort=updated&per_page=4`);
      
      if (!response.ok) throw new Error('Failed to fetch');
      
      const repos = await response.json();
      
      if (repos.length === 0) {
        container.innerHTML = '<p class="no-repos">No public repositories found</p>';
        return;
      }

      container.innerHTML = repos.map(repo => `
        <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer" class="project-card">
          <div class="project-header">
            <div class="project-icon">üì¶</div>
            <h4 class="project-name">${escapeHtml(repo.name)}</h4>
          </div>
          <p class="project-description">${escapeHtml(repo.description || 'No description available')}</p>
          <div class="project-footer">
            ${repo.language ? `<span class="language-tag">${escapeHtml(repo.language)}</span>` : ''}
            <div class="project-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z"/>
                </svg>
                ${repo.stargazers_count}
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm0 2.122a2.25 2.25 0 10-1.5 0v.878A2.25 2.25 0 005.75 8.5h1.5v2.128a2.251 2.251 0 101.5 0V8.5h1.5a2.25 2.25 0 002.25-2.25v-.878a2.25 2.25 0 10-1.5 0v.878a.75.75 0 01-.75.75h-4.5A.75.75 0 015 6.25v-.878zm3.75 7.378a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm3-8.75a.75.75 0 100-1.5.75.75 0 000 1.5z"/>
                </svg>
                ${repo.forks_count}
              </span>
            </div>
          </div>
        </a>
      `).join('');
      
    } catch (error) {
      console.error('Error loading GitHub repos:', error);
      container.innerHTML = '<p class="error-state">Unable to load repositories</p>';
    }
  }

  function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }

  // Load repos when page loads
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadGitHubRepos);
  } else {
    loadGitHubRepos();
  }
</script>

<style>
  .social-projects-showcase {
    margin: 4rem 0;
    padding: 3rem 0;
    background: linear-gradient(to bottom, #f8f9fa 0%, #ffffff 100%);
    border-radius: 16px;
  }
  
  .showcase-header {
    text-align: center;
    margin-bottom: 3rem;
  }
  
  .showcase-header h2 {
  font-size: 2.25rem;
  margin: 0 0 0.5rem 0;
  background: linear-gradient(135deg, #dc3545 0%, #000000 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  }
  
  .showcase-header p {
    color: #666;
    font-size: 1.1rem;
    margin: 0;
  }
  
  .showcase-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: 2rem;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .add-sample-btn {
  background: linear-gradient(135deg, #dc3545 0%, #000000 100%);
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 8px;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.add-sample-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
}

.count {
  background: linear-gradient(135deg, #dc3545 0%, #000000 100%);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: 700;
  min-width: 40px;
  text-align: center;
  box-shadow: 0 2px 6px rgba(220, 53, 69, 0.3);
}
  
  .showcase-panel {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    transition: transform 0.3s, box-shadow 0.3s;
  }
  
  .showcase-panel:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
  }
  
  .panel-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 3px solid #f0f0f0;
  }
  
  .header-icon {
    font-size: 2.5rem;
    flex-shrink: 0;
  }
  
  .header-text h3 {
    margin: 0 0 0.25rem 0;
    font-size: 1.5rem;
    color: #333;
  }
  
  .header-text p {
    margin: 0;
    color: #999;
    font-size: 0.95rem;
  }
  
  /* Social Links Styles */
  .social-links {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .social-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.25rem;
    background: #f8f9fa;
    border-radius: 10px;
    text-decoration: none;
    transition: all 0.3s;
    border: 2px solid transparent;
  }
  
  .social-link:hover {
    background: white;
    transform: translateX(8px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  
  .social-link.github {
    border-left: 4px solid #333;
  }
  
  .social-link.github:hover {
    border-color: #333;
    background: linear-gradient(to right, rgba(51, 51, 51, 0.05), white);
  }
  
  .social-link.threads {
  border-left: 4px solid #dc3545;
}

.social-link.threads:hover {
  border-color: #dc3545;
  background: linear-gradient(to right, rgba(220, 53, 69, 0.05), white);
}
  
.social-link.threads .social-icon {
  color: #dc3545;
}

/* Update social arrow hover */
.social-link:hover .social-arrow {
  transform: translateX(4px);
  color: #dc3545;
}
  .social-link.linkedin {
    border-left: 4px solid #0077B5;
  }
  
  .social-link.linkedin:hover {
    border-color: #0077B5;
    background: linear-gradient(to right, rgba(0, 119, 181, 0.05), white);
  }
  
  .social-link.discord {
    border-left: 4px solid #5865F2;
  }
  
  .social-link.discord:hover {
    border-color: #5865F2;
    background: linear-gradient(to right, rgba(88, 101, 242, 0.05), white);
  }
  
  .social-icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    flex-shrink: 0;
  }
  
  .social-link.github .social-icon {
    color: #333;
  }
  
  .social-link.twitter .social-icon {
    color: #1DA1F2;
  }
  
  .social-link.linkedin .social-icon {
    color: #0077B5;
  }
  
  .social-link.discord .social-icon {
    color: #5865F2;
  }
  
  .social-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }
  
  .social-label {
    font-weight: 700;
    color: #333;
    font-size: 1rem;
  }
  
  .social-handle {
    color: #666;
    font-size: 0.9rem;
  }
  
  .social-arrow {
    font-size: 1.5rem;
    color: #999;
    transition: transform 0.3s;
  }
  
  .social-link:hover .social-arrow {
    transform: translateX(4px);
    color: #667eea;
  }
  
  /* Projects Styles */
  .projects-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 1.25rem;
  margin-bottom: 1.5rem;
  min-height: 280px;
}
  
  .loading-state,
  .error-state,
  .no-repos {
    grid-column: 1 / -1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 3rem 1rem;
    color: #999;
  }
  
  .spinner {
    width: 40px;
    height: 40px;
    border: 4px solid #f0f0f0;
    border-top-color: #667eea;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin-bottom: 1rem;
  }
  
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  
  .project-card {
  background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
  border-radius: 12px;
  padding: 1.5rem;
  text-decoration: none;
  transition: all 0.3s;
  border: 2px solid #e9ecef;
  display: flex;
  flex-direction: column;
  position: relative;
  overflow: hidden;
}

.project-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #dc3545 0%, #000000 100%);
  transform: scaleX(0);
  transition: transform 0.3s;
}

.project-card:hover::before {
  transform: scaleX(1);
}

.project-card:hover {
  background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
  border-color: #dc3545;
  transform: translateY(-6px) scale(1.02);
  box-shadow: 0 8px 24px rgba(220, 53, 69, 0.2);
}
  
 .project-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.project-icon {
  font-size: 1.75rem;
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

.project-card:hover .project-icon {
  animation: bounce 0.6s ease;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}
  
  .project-name {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 700;
  color: #000;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.project-card:hover .project-name {
  color: #dc3545;
}

.project-description {
  flex: 1;
  color: #666;
  font-size: 0.9rem;
  line-height: 1.6;
  margin: 0 0 1.25rem 0;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.project-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.75rem;
  margin-top: auto;
  padding-top: 1rem;
  border-top: 2px solid #f0f0f0;
}
  
  .language-tag {
  background: #dc3545;
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
}
  
  .project-stats {
  display: flex;
  gap: 1rem;
  align-items: center;
}

.stat {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  color: #666;
  font-size: 0.9rem;
  font-weight: 600;
  transition: all 0.3s;
}
  
  .project-card:hover .stat {
  color: #dc3545;
}

.stat svg {
  color: #999;
  transition: all 0.3s;
}

.project-card:hover .stat svg {
  color: #dc3545;
  transform: scale(1.2);
}
  
  .view-all-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  color: #dc3545;
  text-decoration: none;
  font-weight: 600;
  font-size: 1rem;
  padding: 0.75rem 1.5rem;
  background: #f8f9fa;
  border-radius: 8px;
  transition: all 0.3s;
}

.view-all-link:hover {
  background: #dc3545;
  color: white;
  transform: translateX(4px);
}
  
  /* Dark mode */
  :root.dark .social-projects-showcase {
    background: linear-gradient(to bottom, #1a1a1a 0%, #0a0a0a 100%);
  }
  
  :root.dark .showcase-header p {
    color: #ccc;
  }
  
  :root.dark .showcase-panel {
    background: #1a1a1a;
    border: 1px solid #333;
  }
  
  :root.dark .header-text h3 {
    color: #f5f5f5;
  }
  
  :root.dark .social-link {
    background: #2a2a2a;
  }
  
  :root.dark .social-link:hover {
    background: #333;
  }
  
  :root.dark .social-icon {
    background: #1a1a1a;
  }
  
  :root.dark .social-label {
    color: #f5f5f5;
  }
  
  :root.dark .project-card {
  background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
  border-color: #444;
}

:root.dark .project-card:hover {
  background: linear-gradient(135deg, #3a1a1a 0%, #2a2a2a 100%);
  border-color: #dc3545;
}

:root.dark .project-name {
  color: #f5f5f5;
}

:root.dark .project-card:hover .project-name {
  color: #dc3545;
}
  
  :root.dark .project-description,
  :root.dark .social-handle {
    color: #ccc;
  }
  
  :root.dark .view-all-link:hover {
  background: #dc3545;
  color: white;
}
  
  :root.dark .view-all-link:hover {
    background: #667eea;
    color: white;
  }
  
  /* Mobile styles */
  @media (max-width: 1024px) {
    .showcase-grid {
      grid-template-columns: 1fr;
    }
  }
  
  @media (max-width: 768px) {
    .social-projects-showcase {
      padding: 2rem 0;
      margin: 2rem 0;
    }
    
    .showcase-header h2 {
      font-size: 1.75rem;
    }
    
    .showcase-grid {
      padding: 0 1rem;
      gap: 1.5rem;
    }
    
    .showcase-panel {
      padding: 1.5rem;
    }
    
    .projects-container {
      grid-template-columns: 1fr;
    }
    
    .social-link {
      padding: 1rem;
    }
    
    .header-text h3 {
      font-size: 1.25rem;
    }
  }
  
  @media (max-width: 480px) {
    .showcase-header h2 {
      font-size: 1.5rem;
    }
    
    .header-icon {
      font-size: 2rem;
    }
    
    .social-icon {
      width: 40px;
      height: 40px;
    }
  }
</style>